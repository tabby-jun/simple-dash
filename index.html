<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Loading...</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" type="text/css" href="common/css/main.css" />
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
</head>

<body id="homepage">

	<div id="wrapper">
		<div id="itemlist">
			<a title="Loading..."><i class="fa fa-spinner"></i></a>
		</div>
	</div>

	<script src='https://unpkg.com/trianglify@^4/dist/trianglify.bundle.js'></script>

	<script>
		var config = {
			"title" : "bold.pink",
			"items" : [
			{
				"alt" : "Flood",
				"icon" : "fa-solid fa-cloud-arrow-down",
				"link" : "https://wavy.bold.pink"
			},
			{
				"alt" : "Plex",
				"icon" : "fa-solid fa-film",
				"link" : "https://plex.bold.pink"
			},
			{
				"alt" : "Firefly",
				"icon" : "fa-solid fa-piggy-bank",
				"link" : "https://firefly.bold.pink"
			},
			{
				"alt" : "Trilium",
				"icon" : "fa-solid fa-book-bookmark",
				"link" : "https://trilium.bold.pink"
			}
			]
		};
		document.title = config.title;
		var itemlistHTML = '';
		for (var i = 0; i < config.items.length; i++) {
			var item = config.items[i];
			itemlistHTML += '<a href="'+item.link+'" title="'+item.alt+'"><i class="'+item.icon+'"></i></a>';
		}
		document.getElementById("itemlist").innerHTML = itemlistHTML;

		function addTriangleTo(target) {
			var dimensions = target.getClientRects()[0];
			var pattern = trianglify({
				width: dimensions.width,
				height: dimensions.height
			});

			let dataUrl = pattern.toCanvas().toDataURL('image/png');

			target.style.backgroundImage = 'url(' + dataUrl + ')';
			target.style['background-size'] = 'cover';
			target.style['-webkit-background-size'] = 'cover';
			target.style['-moz-background-size'] = 'cover';
			target.style['-o-background-size'] = 'cover';
		}

		var resizeTimer;
		window.addEventListener("resize", function () {
			clearTimeout(resizeTimer);
			resizeTimer = setTimeout(function() {
				addTriangleTo(homepage);
			}, 400);
		})

		addTriangleTo(homepage);
	</script>
</body>
</html>
